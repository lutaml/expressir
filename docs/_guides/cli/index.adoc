---
title: CLI Guides
parent: Guides
nav_order: 1
has_children: true
---

== Expressir CLI Guides

=== Purpose

The Expressir Command-Line Interface (CLI) provides powerful tools for working with EXPRESS schemas without writing code. These guides cover all CLI commands, options, and practical usage patterns.

=== Quick Start

==== Installation Verification

[source,bash]
----
# Check if Expressir is installed
expressir version

# View all available commands
expressir help
----

==== Basic Commands

[source,bash]
----
# Format a schema
expressir format schema.exp

# Validate a schema
expressir validate schema.exp

# Check documentation coverage
expressir coverage schema.exp
----

=== Available Commands

==== Schema Processing

**link:format-schemas.html[Format Schemas]**::
Pretty-print EXPRESS schemas with consistent formatting
+
[source,bash]
----
expressir format schema.exp
expressir format schema.exp --output formatted.exp
----

**link:validate-schemas.html[Validate Schemas]**::
Check schema syntax and version strings
+
[source,bash]
----
expressir validate schema.exp
expressir validate schemas/*.exp
----

**Clean Schemas**::
Remove remarks and prettify schemas
+
[source,bash]
----
expressir clean schema.exp
expressir clean schema.exp --output clean.exp
----

==== Analysis Tools

**link:coverage-analysis.html[Coverage Analysis]**::
Analyze documentation coverage
+
[source,bash]
----
expressir coverage schemas/
expressir coverage schemas/ --format json
expressir coverage schemas/ --exclude=TYPE:SELECT
----

**link:benchmark-performance.html[Benchmark Performance]**::
Measure parsing and loading performance
+
[source,bash]
----
expressir benchmark schema.exp
expressir benchmark-cache schema.exp
----

==== Package Management

**Build Packages**::
Create LER packages from schemas
+
[source,bash]
----
expressir package build schema.exp output.ler
expressir package build schema.exp output.ler --name "My Package"
----

**Query Packages**::
Search and list package contents
+
[source,bash]
----
expressir package list package.ler
expressir package search package.ler "product"
expressir package info package.ler
----

**Validate Packages**::
Check package integrity
+
[source,bash]
----
expressir package validate package.ler
expressir package validate package.ler --strict
----

**Package Tree View**::
Display package structure
+
[source,bash]
----
expressir package tree package.ler
expressir package tree package.ler --depth 2
----

==== Changes Management

**link:managing-changes.html[Managing Changes]**::
Work with EXPRESS Changes files
+
[source,bash]
----
expressir changes validate schema.changes.yaml
expressir changes import-eengine comparison.xml schema_name "2"
----

==== Utility Commands

**Version**::
Display Expressir version
+
[source,bash]
----
expressir version
----

**Help**::
Get help for any command
+
[source,bash]
----
expressir help
expressir help format
expressir help coverage
----

=== Command Patterns

==== Working with Single Files

[source,bash]
----
# Process one file
expressir format schema.exp
expressir validate schema.exp
expressir coverage schema.exp
----

==== Working with Multiple Files

[source,bash]
----
# Process multiple files explicitly
expressir validate schema1.exp schema2.exp schema3.exp

# Use wildcards
expressir validate schemas/*.exp

# Process recursively
expressir coverage schemas/
----

==== Using Wildcards

[source,bash]
----
# All .exp files in directory
expressir format *.exp

# All .exp files recursively
expressir coverage schemas/**/*.exp

# Specific pattern
expressir validate *_schema.exp
----

==== Output Redirection

[source,bash]
----
# Redirect to file
expressir format schema.exp > formatted.exp

# Save with --output flag
expressir format schema.exp --output formatted.exp

# Save error output
expressir validate schema.exp 2> errors.log
----

==== Piping Commands

[source,bash]
----
# Format and validate
expressir format schema.exp | tee formatted.exp | expressir validate -

# Process and save
expressir format schema.exp > temp.exp && mv temp.exp schema.exp
----

=== Common Options

==== Global Options

[options="header"]
|===
| Option | Description | Example

| `--help`, `-h`
| Show help for command
| `expressir format --help`

| `--version`, `-v`
| Show version
| `expressir --version`

| `--verbose`
| Enable verbose output
| `expressir format schema.exp --verbose`
|===

==== Output Options

[options="header"]
|===
| Option | Description | Example

| `--output PATH`, `-o PATH`
| Save to file
| `expressir format schema.exp -o output.exp`

| `--format FORMAT`
| Output format (text, json, yaml)
| `expressir coverage schemas/ --format json`
|===

==== Processing Options

[options="header"]
|===
| Option | Description | Example

| `--recursive`, `-r`
| Process directories recursively
| `expressir coverage schemas/ --recursive`

| `--exclude TYPES`
| Exclude element types
| `expressir coverage schemas/ --exclude=TYPE`
|===

=== Usage Examples

==== Daily Workflow

[source,bash]
----
# 1. Format new schema
expressir format new_schema.exp --output new_schema.exp

# 2. Validate it
expressir validate new_schema.exp

# 3. Check documentation
expressir coverage new_schema.exp

# 4. If all good, commit
git add new_schema.exp
git commit -m "Add new_schema"
----

==== Batch Processing

[source,bash]
----
# Process all schemas in directory
for file in schemas/*.exp; do
  echo "Processing $file..."
  expressir format "$file" --output "$file"
  expressir validate "$file"
done
----

==== Quality Assurance

[source,bash]
----
# Run all checks
echo "Validating..."
expressir validate schemas/*.exp

echo "Checking coverage..."
expressir coverage schemas/ --exclude=TYPE:SELECT

echo "Benchmarking..."
expressir benchmark schemas/*.exp
----

==== CI/CD Integration

[source,bash]
----
#!/bin/bash
# Schema validation script for CI

set -e

echo "Validating schemas..."
expressir validate schemas/*.exp

echo "Checking coverage (minimum 80%)..."
COVERAGE=$(expressir coverage schemas/ --format json | jq '.overall.coverage_percentage')
if (( $(echo "$COVERAGE < 80" | bc -l) )); then
  echo "Coverage below 80%: ${COVERAGE}%"
  exit 1
fi

echo "All checks passed!"
----

=== Environment Variables

[options="header"]
|===
| Variable | Purpose | Example

| `EXPRESSIR_CACHE_DIR`
| Cache directory location
| `export EXPRESSIR_CACHE_DIR=/tmp/expressir`

| `EXPRESSIR_LOG_LEVEL`
| Logging level
| `export EXPRESSIR_LOG_LEVEL=DEBUG`
|===

=== Configuration Files

==== Schema Manifest

Create `schemas.yml`:

[source,yaml]
----
schemas:
  - path: schemas/base.exp
    id: base_schema
  - path: schemas/product.exp
    id: product_schema
----

Use with commands:

[source,bash]
----
expressir benchmark schemas.yml
expressir coverage schemas.yml
----

==== Coverage Ignore File

Create `coverage_ignore.yml`:

[source,yaml]
----
- examples/*.exp
- test/*.exp
- legacy/*.exp
----

Use with coverage:

[source,bash]
----
expressir coverage schemas/ --ignore-files coverage_ignore.yml
----

=== Best Practices

**Use Scripts for Repetitive Tasks**::
Create shell scripts for common workflows
+
[source,bash]
----
#!/bin/bash
# format-all.sh
expressir format schemas/*.exp
----

**Validate Before Committing**::
Always validate schemas before version control
+
[source,bash]
----
# Pre-commit hook
expressir validate $(git diff --cached --name-only | grep '\.exp$')
----

**Check Coverage Regularly**::
Track documentation coverage over time
+
[source,bash]
----
expressir coverage schemas/ --format json > coverage-$(date +%Y%m%d).json
----

**Use Verbose Mode for Debugging**::
Enable verbose output to troubleshoot issues
+
[source,bash]
----
expressir format schema.exp --verbose
----

**Test with Small Files First**::
Try commands on sample files before processing large schemas

=== Troubleshooting

==== Command Not Found

**Problem**: `expressir: command not found`

**Solutions**:

1. Install Expressir:
+
[source,bash]
----
gem install expressir
----

2. Add to PATH:
+
[source,bash]
----
export PATH="$HOME/.gem/ruby/X.X.0/bin:$PATH"
----

3. Use bundle exec:
+
[source,bash]
----
bundle exec expressir format schema.exp
----

==== Permission Errors

**Problem**: Cannot write to output file

**Solution**: Check file permissions and paths:

[source,bash]
----
# Check permissions
ls -la schema.exp

# Use different output location
expressir format schema.exp --output /tmp/output.exp
----

==== Large File Processing

**Problem**: Command hangs on large files

**Solutions**:

* Use --verbose to see progress
* Process files individually
* Increase system resources
* Consider using LER packages

==== Parse Errors

**Problem**: Schema fails to parse

**Solutions**:

* Check EXPRESS syntax
* Look for special characters
* Validate encoding (UTF-8)
* Review error messages carefully

=== CLI vs Ruby API

[options="header"]
|===
| Task | CLI | Ruby API | Best For

| Quick formatting
| ✅ Easy
| ❌ Complex
| CLI

| Batch processing
| ✅ Shell scripts
| ✅ Ruby scripts
| Either

| Custom workflows
| ❌ Limited
| ✅ Flexible
| Ruby API

| CI/CD integration
| ✅ Simple
| ✅ Powerful
| CLI for simple, API for complex

| Documentation generation
| ❌ Not available
| ✅ Full control
| Ruby API
|===

=== Next Steps

**Learn Specific Commands**::
* link:format-schemas.html[Format Schemas] - Detailed formatting guide
* link:validate-schemas.html[Validate Schemas] - Complete validation reference
* link:coverage-analysis.html[Coverage Analysis] - Documentation coverage tools

**Advanced Usage**::
* link:benchmark-performance.html[Benchmark Performance] - Performance testing
* link:managing-changes.html[Managing Changes] - Changes file workflows

**Automation**::
* link:../deployment/ci-cd-setup.html[CI/CD Setup] - Automated workflows
* Shell scripting guides
* Pre-commit hooks

=== References

* link:../../pages/getting-started.html[Getting Started] - Installation and setup
* link:../ruby-api/[Ruby API Guides] - Programmatic usage
* link:../../tutorials/[Tutorials] - Step-by-step learning
* https://github.com/lutaml/expressir[GitHub Repository] - Source and examples